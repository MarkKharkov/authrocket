{"version":3,"sources":["authrocket.min.js","/source/authrocket.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","require","define","amd","AuthRocket","_","superagent","this","removeTrailingSlash","url","isString","replace","logger","error","description","func","file","runConsoleMethod","methodName","methodData","console","apply","log","buildMessageArgs","logData","msgStr","msgObj","___default","isObject","logLevel","has","obj","each","omit","keys","ind","list","msg","handleResponse","req","Promise","resolve","reject","end","err","res","status","_logger","warn","response","text","body","addAuthRocketHeaders","newReq","config","accountId","apiKey","realmId","headers","X-Authrocket-Account","X-Authrocket-Api-Key","X-Authrocket-Realm","Accept","Content-Type","addHeaderToReq","headerName","headerVal","set","defaultConfig","process","env","AUTHROCKET_ACCOUNT_ID","AUTHROCKET_API_KEY","AUTHROCKET_REALM_ID","jwtSecret","AUTHROCKET_JWT_SECRET","apiUrl","AUTHROCKET_API_URL","jsUrl","AUTHROCKET_JS_URL","configInstance","Config","merge","value","settingsData","_this","get","api","js","msgArgs","envName","info","debug","request","endpoint","queryData","query","post","data","send","put","del","withHeaders","type","UserAction","settings","userData","urls","username","loginData","then","UsersAction","collection","applySettings","token","signupData"],"mappings":"AAEA,QAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,cAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,OCAjiB,SAAWkB,EAAQC,GACC,gBAAZC,UAA0C,mBAAXC,QAAyBA,OAAOD,QAAUD,EAAQG,QAAQ,UAAWA,QAAQ,eACjG,kBAAXC,SAAyBA,OAAOC,IAAMD,QAAQ,SAAU,cAAeJ,GAC9ED,EAAOO,WAAaN,EAAQD,EAAOQ,EAAER,EAAOS,aAC3CC,KAAM,SAAUF,EAAEC,GAAc,YA2CjC,SAASE,GAAoBC,GAC3B,MAAKJ,GAAEK,SAASD,GAITA,EAAIE,QAAQ,MAAO,KAHxBC,OAAOC,OAAOC,YAAa,0CAA2CC,KAAM,sBAAuBC,KAAM,WAClGP,GAwDX,QAASQ,GAAiBC,EAAYC,GAErC,MAAID,IAAcE,QAAQF,GAClBE,QAAQF,GAAYG,MAAMD,QAASD,GAEnCC,QAAQE,IAAID,MAAMD,QAASD,GAGpC,QAASI,GAAiBC,GACzB,GAAIC,GAAS,GACTC,IAGAC,GAAWC,SAASJ,IACP,SAAZK,GACCF,EAAWG,IAAIN,EAAS,UAG1BC,GAFGE,EAAWG,IAAIN,EAAS,OAErB,IAAQA,EAAQO,IAAG,IAAIP,EAAQT,KAAI,SAC/BY,EAAWG,IAAIN,EAAS,QAC5B,IAAQA,EAAQR,KAAI,MAAMQ,EAAQT,KAAI,SAEtC,IAAQS,EAAQT,KAAI,UAK7BY,EAAWK,KAAKL,EAAWM,KAAKN,EAAWO,KAAKV,IAAW,SAAC/B,EAAK0C,EAAKC,GAC1D,QAAP3C,GAAwB,OAAPA,IACT,eAAPA,GAA+B,WAAPA,EAC3BgC,GAAUD,EAAQ/B,GACRkC,EAAWjB,SAASc,EAAQ/B,IAEtCiC,EAAOjC,GAAO+B,EAAQ/B,GAItBiC,EAAOjC,GAAO+B,EAAQ/B,MAIzBgC,GAAU,MACAE,EAAWjB,SAASc,KAC9BC,EAASD,EAEV,IAAIa,IAAOZ,EAAQC,EAEnB,OAAOW,GAwCR,QAASC,GAAeC,GACvB,MAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5BH,EAAII,IAAI,SAACC,EAAKC,GACb,MAAKD,IAIc,KAAdA,EAAIE,QACPC,EAAQC,MAAMlC,YAAa,2DAA4DC,KAAM,mBAE1F6B,GAAOA,EAAIK,SACPP,EAAOE,EAAIK,SAASC,OAE5BH,EAAQC,MAAMlC,YAAa,kBAAmBD,MAAO+B,EAAK7B,KAAM,mBACzD2B,EAAOE,KATPH,EAAQI,EAAIM,UAevB,QAASC,GAAqBb,GAC7B,GAAIc,GAASd,CAEb,KAAKe,EAAOC,YAAcD,EAAOE,SAAWF,EAAOG,QAElD,WADAV,GAAQlC,OAAOC,YAAa,gDAG5B,IAAI4C,IACFC,uBAAwBL,EAAOC,UAC/BK,uBAAwBN,EAAOE,OAC/BK,qBAAsBP,EAAOG,QAC7BK,OAAU,mBACVC,eAAgB,mBAOnB,OAHA1D,GAAE2B,KAAK3B,EAAE6B,KAAKwB,GAAU,SAACjE,GACxB4D,EAASW,EAAezB,EAAK9C,EAAKiE,EAAQjE,MAEpC4D,EAGR,QAASW,GAAezB,EAAK0B,EAAYC,GACxC,MAAKD,IAAeC,EAIb3B,EAAI4B,IAAIF,EAAYC,OAH1BnB,GAAQlC,OAAOC,YAAa,2DAA4DC,KAAM,iBAAkBgB,IAAK,YAvOvH,GAAIJ,GAAa,WAAatB,GAAIA,EAAE,WAAaA,CACjDC,GAAa,WAAaA,GAAaA,EAAW,WAAaA,CAE/D,IAAI8D,IACHb,UAAWc,QAAQC,IAAIC,sBACvBf,OAAQa,QAAQC,IAAIE,mBACpBf,QAASY,QAAQC,IAAIG,oBACrBC,UAAWL,QAAQC,IAAIK,sBACtBC,OAAQP,QAAQC,IAAIO,oBAAuB,oCAC3CC,MAAOT,QAAQC,IAAIS,mBAEjBC,EAAiB,KACfC,EAAM,WACA,QADNA,KAMJ,MDAAxG,iBAAgB8B,KCNZ0E,GAECD,IACDA,EAAiBzE,MAGdF,EAAE6E,MAAMF,EAAgBZ,GD4ChC,MAnCAvF,cCfKoG,IDgBJxF,IAAK,gBACL0F,MCTa,SAACC,GDUb,GAAIC,GAAQ9E,ICTXF,GAAE2B,KAAK3B,EAAE6B,KAAKkD,GAAe,SAAC3F,GAC5B4F,EAAK5F,GAAO2F,EAAa3F,QDiB7BA,IAAK,OACL6F,ICdQ,WACN,GAAIR,GAAQvE,KAAKuE,MACbF,EAASrE,KAAKqE,MAClB,OAAArF,QAAAT,qBACMyG,KDeLD,ICfQ,WACL,MAAOV,GAASpE,EAAoBoE,GAAU,MDiBjDvF,cAAc,EACdD,YAAY,GChBPoG,IDmBLF,ICnBO,WACJ,MAAOR,GAAQtE,EAAoBsE,GAAS,MDqB/CzF,cAAc,EACdD,YAAY,SC5CX6F,KA2BF3B,EAAS,GAAI2B,GAWbpD,EAAW,OAEXyB,GAAOzB,WACVA,EAAWyB,EAAOzB,SAEnB,IAAIkB,IACHzB,IAAG,SAACE,GACH,GAAIiE,GAAUlE,EAAiBC,EACT,eAAlB8B,EAAOoC,QACVzE,EAAiB,MAAOwE,GAExBxE,EAAiB,MAAOwE,IAG1BE,KAAI,SAACnE,GACJ,GAAIiE,GAAUlE,EAAiBC,EACT,eAAlB8B,EAAOoC,QACVzE,EAAiB,OAAQwE,GAEzBxE,EAAiB,OAAQwE,IAG3BzC,KAAI,SAACxB,GACJ,GAAIiE,GAAUlE,EAAiBC,EACT,eAAlB8B,EAAOoC,QACVzE,EAAiB,OAAQwE,GAEzBxE,EAAiB,OAAQwE,IAG3BG,MAAK,SAACpE,GACL,GAAIiE,GAAUlE,EAAiBC,EACT,eAAlB8B,EAAOoC,SAIVzE,EAAiB,QAASwE,IAG5B5E,MAAK,SAACW,GACL,GAAIiE,GAAUlE,EAAiBC,EACT,eAAlB8B,EAAOoC,QAEVzE,EAAiB,QAASwE,GAE1BxE,EAAiB,QAASwE,KAuDzBI,GACHP,IAAG,SAACQ,EAAUC,GACb,GAAIxD,GAAMjC,EAAWgF,IAAIQ,EAKzB,OAJIC,IACHxD,EAAIyD,MAAMD,GAGJzD,EAAeC,IAEvB0D,KAAI,SAACH,EAAUI,GACd,GAAI3D,GAAMjC,EAAW2F,KAAKH,GAAUK,KAAKD,EAEzC,OAAO5D,GAAeC,IAEvB6D,IAAG,SAACN,EAAUI,GACb,GAAI3D,GAAMjC,EAAW8F,IAAIN,EAAUI,EAEnC,OAAO5D,GAAeC,IAEvB8D,IAAG,SAACP,EAAUI,GACb,GAAI3D,GAAMjC,EAAW8F,IAAIN,EAAUI,EAEnC,OAAO5D,GAAeC,IAOtB+D,YAAW,SAACC,EAAM9F,EAAKyF,GACtB,GAAI3D,GAAMjC,EAAWiG,GAAM9F,EAE3B,OADA8B,GAAMa,EAAqBb,GACpBD,EAAeC,KAuDnBiE,EAAU,WACH,QADPA,GACQC,GD2BZhI,gBAAgB8B,KC5BZiG,GDiFL,MA1CA3H,cCvCK2H,IDwCJ/G,IAAK,MACL0F,MC/BG,SAACuB,GAEF,MAAOb,GAAQP,IAAOhC,EAAOqD,KAAKpB,IAAG,UAAUmB,EAASE,SAAYC,WAAWC,KAAK,SAACjE,GAEnF,MADAE,GAAQzB,KAAKR,YAAa,mBAAoB+B,IAAKA,IAC/CxC,EAAEyB,IAAIe,EAAK,UACbE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC3FS,QAAQE,OAAOG,EAAIhC,QAErBgC,GACN,SAAChC,GAEF,MADAkC,GAAQlC,OAAOC,YAAa,oBAAqBD,MAAOA,IACjD2B,QAAQE,OAAO7B,QD2C1BpB,IAAK,SACL0F,MClCM,SAACuB,GAEL,MAAOb,GAAQQ,IAAO/C,EAAOqD,KAAKpB,IAAG,UAAUmB,EAASE,SAAYF,GAAUI,KAAK,SAACjE,GAClF,MAAIxC,GAAEyB,IAAIe,EAAK,UACbE,EAAQlC,OAAOC,YAAa,uBAAwBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC9FS,QAAQE,OAAOG,EAAIhC,SAE5BkC,EAAQzB,KAAKR,YAAa,6BAA8B+B,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAChFc,IACN,SAACD,GAEF,MADAG,GAAQlC,OAAOC,YAAa,uBAAwBD,MAAO+B,EAAK7B,KAAM,SAAUgB,IAAK,eAC9ES,QAAQE,OAAOE,SA1CtB4D,KAgDAO,EAAW,WACJ,QADPA,GACQN,GDqCZhI,gBAAgB8B,KCtCZwG,GDkFL,MArCAlI,cC7CKkI,ID8CJtH,IAAK,MACL0F,MCxCG,WACD,MAAOU,GAAQS,YAAY,MAAUhD,EAAOqD,KAAKpB,IAAG,UAAUuB,KAAK,SAACjE,GAElE,MADAE,GAAQzB,KAAKR,YAAa,kCAAmC+B,IAAKA,EAAK9B,KAAM,MAAOgB,IAAK,gBACrFJ,EAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,UAC3FS,QAAQE,OAAOG,EAAIhC,QAErBgC,EAAImE,WAAanE,EAAImE,WAAanE,GACxC,SAAChC,GAEF,MADAkC,GAAQlC,OAAOC,YAAa,uBAAwBD,MAAOA,IACpD2B,QAAQE,OAAO7B,QDiD1BpB,IAAK,MACL0F,MC3CG,SAACuB,GACF,MAAOb,GAAQI,KAAQ3C,EAAOqD,KAAKpB,IAAG,SAAUmB,GAAUI,KAAK,SAACjE,GAE9D,MADAE,GAAQzB,KAAKR,YAAa,8BAA+B+B,IAAKA,IAC1DlB,EAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,2BAA4BD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,UAClGS,QAAQE,OAAOG,EAAIhC,QAErBgC,GACN,SAACD,GAEF,MADAG,GAAQlC,OAAOC,YAAa,2BAA4BD,MAAO+B,IACxDJ,QAAQE,OAAOE,SAlCtBmE,KAwCA3G,EAAU,WACH,QADPA,GACQqG,GD8CZhI,gBAAgB8B,KC/CZH,GAEEqG,GAAY9E,EAAWjB,SAAS+F,GAClClG,KAAKqE,OAAS6B,EAGdnD,EAAO2D,cAAcR,GD0K1B,MAhHA5H,cChEKuB,IDiEJX,IAAK,QACL0F,MCnDK,SAAC0B,GACJ,MAAOhB,GAAQI,KAAQ3C,EAAOqD,KAAKnB,GAAE,SAAUqB,GAAWC,KAAK,SAACjE,GAE9D,MADAE,GAAQzB,KAAKR,YAAa,mBAAoB+B,IAAKA,IAC/ClB,EAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC3FS,QAAQE,OAAOG,EAAIhC,QAErBgC,GACN,SAAChC,GAEF,MADAkC,GAAQlC,OAAOC,YAAa,oBAAqBD,MAAOA,IACjD2B,QAAQE,OAAO7B,QD4D1BpB,IAAK,SACL0F,MCtDM,SAAC+B,GAEL,MADA9F,SAAQE,IAAI,UAAWgC,EAAOqD,KAAKnB,IAC5BK,EAAQI,KAAQ3C,EAAOqD,KAAKnB,GAAE,WAAY0B,MAAOA,IAAQJ,KAAK,SAACjE,GAEpE,MADAE,GAAQzB,KAAKR,YAAa,oBAAqB+B,IAAKA,IAChDlB,EAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC3FS,QAAQE,OAAOG,EAAIhC,QAErBgC,GACN,SAACD,GAEF,MADAG,GAAQlC,OAAOC,YAAa,qBAAsBD,MAAO+B,IAClDJ,QAAQE,OAAOE,QDkE1BnD,IAAK,SACL0F,MCzDM,SAACgC,GACL,MAAOtB,GAAQI,KAAQ3C,EAAOqD,KAAKnB,GAAE,UAAW2B,GAAYL,KAAK,SAACjE,GAChE,MAAIlB,GAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC3FS,QAAQE,OAAOG,EAAIhC,SAE5BkC,EAAQzB,KAAKR,YAAa,oBAAqB+B,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eACvEc,IACN,SAACD,GAEF,MADAG,GAAQlC,OAAOC,YAAa,oBAAqBD,MAAO+B,EAAK7B,KAAM,SAAUgB,IAAK,eAC3ES,QAAQE,OAAOE,QDkE1BnD,IAAK,SACL0F,MC5DM,SAAC+B,GACL,MAAOrB,GAAQI,KAAQ3C,EAAOqD,KAAKnB,GAAE,aAAa0B,GAASJ,KAAK,SAACjE,GAE/D,MADAE,GAAQzB,KAAKR,YAAa,iBAAkB+B,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eACvEJ,EAAWG,IAAIe,EAAK,UACtBE,EAAQlC,OAAOC,YAAa,oBAAqBD,MAAOgC,EAAIhC,MAAOgC,IAAKA,EAAK9B,KAAM,SAAUgB,IAAK,eAC3FS,QAAQE,OAAOG,EAAIhC,QAErBgC,GACN,SAACD,GAEF,MADAG,GAAQlC,OAAOC,YAAa,oBAAqBD,MAAO+B,EAAK7B,KAAM,SAAUgB,IAAK,eAC3ES,QAAQE,OAAOE,QDwE1BnD,IAAK,OAcL0F,MC5DI,SAACuB,GACH,MAAO,IAAIF,GAAWE,MD+DxBjH,IAAK,QACL6F,IChFS,WACP,MAAO,IAAIyB,OA5FT3G,IA+GN,OAAOA","file":"authrocket.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash'), require('superagent')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash', 'superagent'], factory) :\n\tglobal.AuthRocket = factory(global._,global.superagent);\n}(this, function (_,superagent) { 'use strict';\n\n\tvar ___default = 'default' in _ ? _['default'] : _;\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\n\tlet defaultConfig = {\n\t\taccountId: process.env.AUTHROCKET_ACCOUNT_ID,\n\t\tapiKey: process.env.AUTHROCKET_API_KEY,\n\t\trealmId: process.env.AUTHROCKET_REALM_ID,\n\t\tjwtSecret: process.env.AUTHROCKET_JWT_SECRET,\n\t  apiUrl: process.env.AUTHROCKET_API_URL  || 'https://api-e1.authrocket.com/v1/',\n\t  jsUrl: process.env.AUTHROCKET_JS_URL\n\t};\n\tlet configInstance = null; //Singleton variable\n\tclass Config {\n\t\tconstructor() {\n\t\t\tif (!configInstance) {\n\t      configInstance = this;\n\t    }\n\t\t\t// console.log({description: 'Config object created.', config: merge(this, defaultConfig), func: 'constructor', obj: 'Config'});\n\t\t\treturn _.merge(configInstance, defaultConfig);\n\t\t}\n\t  applySettings(settingsData) {\n\t    _.each(_.keys(settingsData), (key) => {\n\t      this[key] = settingsData[key];\n\t    });\n\t  }\n\t  //Map getters that handle removing trailing slash of urls\n\t  get urls() {\n\t    let jsUrl = this.jsUrl;\n\t    let apiUrl = this.apiUrl;\n\t    return {\n\t      get api() {\n\t        return apiUrl ? removeTrailingSlash(apiUrl) : null;\n\t      },\n\t      get js() {\n\t        return jsUrl ? removeTrailingSlash(jsUrl) : null;\n\t      }\n\t    };\n\t  }\n\t}\n\tlet config = new Config();\n\n\tfunction removeTrailingSlash(url) {\n\t  if (!_.isString(url)) {\n\t    logger.error({description: 'Slash can only be removed from strings.', func: 'removeTrailingSlash', file: 'config'});\n\t    return url;\n\t  }\n\t  return url.replace(/\\/$/, '');\n\t}\n\n\t//Set default log level to debug\n\tlet logLevel = 'debug';\n\t//Set log level from config\n\tif (config.logLevel) {\n\t\tlogLevel = config.logLevel;\n\t}\n\tlet _logger = {\n\t\tlog(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t}\n\t\t},\n\t\tinfo(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t}\n\t\t},\n\t\twarn(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t}\n\t\t},\n\t\tdebug(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t// runConsoleMethod('debug', msgArgs);\n\t\t\t\t//Do not display console debugs in production\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('debug', msgArgs);\n\t\t\t}\n\t\t},\n\t\terror(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t//TODO: Log to external logger\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction runConsoleMethod(methodName, methodData) {\n\t\t//Safley run console methods or use console log\n\t\tif (methodName && console[methodName]) {\n\t\t\treturn console[methodName].apply(console, methodData);\n\t\t} else {\n\t\t\treturn console.log.apply(console, methodData);\n\t\t}\n\t}\n\tfunction buildMessageArgs(logData) {\n\t\tvar msgStr = '';\n\t\tvar msgObj = {};\n\t\t//TODO: Attach time stamp\n\t\t//Attach location information to the beginning of message\n\t\tif (___default.isObject(logData)) {\n\t\t\tif (logLevel == 'debug') {\n\t\t\t\tif (___default.has(logData, 'func')) {\n\t\t\t\t\tif (___default.has(logData, 'obj')) {\n\t\t\t\t\t\t//Object and function provided\n\t\t\t\t\t\tmsgStr += `[${logData.obj}.${logData.func}()]\\n `;\n\t\t\t\t\t} else if (___default.has(logData, 'file')) {\n\t\t\t\t\t\tmsgStr += `[${logData.file} > ${logData.func}()]\\n `;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmsgStr += `[${logData.func}()]\\n `;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t___default.each(___default.omit(___default.keys(logData)), (key, ind, list) => {\n\t\t\t\tif (key != 'func' && key != 'obj') {\n\t\t\t\t\tif (key == 'description' || key == 'message') {\n\t\t\t\t\t\tmsgStr += logData[key];\n\t\t\t\t\t} else if (___default.isString(logData[key])) {\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Print objects differently\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tmsgStr += '\\n';\n\t\t} else if (___default.isString(logData)) {\n\t\t\tmsgStr = logData;\n\t\t}\n\t\tvar msg = [msgStr, msgObj];\n\n\t\treturn msg;\n\t}\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = superagent.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\t// req = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = superagent.post(endpoint).send(data);\n\t\t\t// req = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint, data);\n\t\t\t// req = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint, data);\n\t\t\t// req = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\t/** Attach AuthRocket request headers and make a request\n\t\t * @param {String} endpoint - Endpoint to send request to\n\t\t * @param {Object|String} data - Request data\n\t\t * @return {Promise}\n\t\t */\n\t\t withHeaders(type, url, data) {\n\t\t\t var req = superagent[type](url);\n\t\t\t req = addAuthRocketHeaders(req);\n\t\t\t return handleResponse(req);\n\t\t }\n\t};\n\n\t//Wrap response in promise that has error handling\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// logger.log({description: 'Response:', response:res, func:'handleResponse', file: 'request'});\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\t_logger.warn({description: 'Unauthorized. You must be signed into make this request.', func: 'handleResponse'});\n\t\t\t\t\t}\n\t\t\t\t\tif (err && err.response) {\n\t\t\t\t\t\treturn reject(err.response.text);\n\t\t\t\t\t}\n\t\t\t\t\t_logger.warn({description: 'Error response.', error: err, func: 'handleResponse'});\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t//Add auth rocket headers to request\n\tfunction addAuthRocketHeaders(req) {\n\t\tlet newReq = req;\n\t\t//TODO: Make this work\n\t\tif (!config.accountId || !config.apiKey || !config.realmId) {\n\t\t\t_logger.error({description: 'AccountId, apiKey, and realmId are required.'});\n\t\t\treturn;\n\t\t}\n\t  let headers = {\n\t    'X-Authrocket-Account': config.accountId,\n\t    'X-Authrocket-Api-Key': config.apiKey,\n\t    'X-Authrocket-Realm': config.realmId,\n\t    'Accept': 'application/json',\n\t    'Content-Type': 'application/json'\n\t    // 'User-agent': 'https://github.com/prescottprue/authrocket' //To provide AuthRocket a contact\n\t  };\n\t\t//Add each header to the request\n\t\t_.each(_.keys(headers), (key) => {\n\t\t\tnewReq = addHeaderToReq(req, key, headers[key]);\n\t\t});\n\t\treturn newReq;\n\t}\n\t//Add header to an existing request\n\tfunction addHeaderToReq(req, headerName, headerVal) {\n\t\tif (!headerName || !headerVal) {\n\t\t\t_logger.error({description: 'Header name and value required to add header to request.', func: 'addHeaderToReq', obj: 'request'});\n\t\t\treturn;\n\t\t}\n\t\treturn req.set(headerName, headerVal);\n\t}\n\n\tclass UserAction {\n\t  constructor(settings) {\n\t  }\n\t  /** Get a specific user\n\t   * @param {Object} userData - Object containing data to signup with\n\t   * @param {String} userData.email - Email of new user\n\t   * @param {String} userData.username - Username of new user\n\t   * @param {String} userData.password - Password of new user\n\t   * @return {Promise}\n\t   */\n\t  get(userData) {\n\t    //TODO: Handle userData not having username\n\t    return request.get(`${config.urls.api}/users/${userData.username}`, loginData).then((res) => {\n\t      _logger.log({description: 'successful login', res: res});\n\t      if (_.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res;\n\t    }, (error) => {\n\t      _logger.error({description: 'Error logging in.', error: error});\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Remove a user\n\t   * @param {Object} userData - Object containing data to signup with\n\t   * @param {String} userData.email - Email of new user\n\t   * @param {String} userData.password - Password of new user\n\t   * @param {String} userData.confirm - Object containing data to signup with\n\t   * @return {Promise}\n\t   */\n\t  remove(userData) {\n\t    //TODO: Handle userData not having username\n\t    return request.del(`${config.urls.api}/users/${userData.username}`, userData).then((res) => {\n\t      if (_.has(res, 'error')) {\n\t        _logger.error({description: 'Error removing user.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      _logger.log({description: 'User removed successfully.', res: res, func: 'signup', obj: 'AuthRocket'});\n\t      return res;\n\t    }, (err) => {\n\t      _logger.error({description: 'Error removing user.', error: err, func: 'signup', obj: 'AuthRocket'});\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\n\t}\n\n\tclass UsersAction {\n\t  constructor(settings) {\n\n\t  }\n\t  /** Get a list of users\n\t   * @return {Promise}\n\t   */\n\t  get() {\n\t    return request.withHeaders('get', `${config.urls.api}/users`).then((res) => {\n\t      _logger.log({description: 'Users list loaded successfully.', res: res, func: 'get', obj: 'UsersAction'});\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'Users'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res.collection ? res.collection : res;\n\t    }, (error) => {\n\t      _logger.error({description: 'Error getting users/', error: error});\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Add a new user\n\t   * @param {Object} userData - Object containing data to create new user with\n\t   * @return {Promise}\n\t   */\n\t  add(userData) {\n\t    return request.post(`${config.urls.api}/users`, userData).then((res) => {\n\t      _logger.log({description: 'Successful created new user', res: res});\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error creating new user.', error: res.error, res: res, func: 'signup', obj: 'Users'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res;\n\t    }, (err) => {\n\t      _logger.error({description: 'Error creating new user.', error: err});\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\n\t}\n\n\tclass AuthRocket {\n\t  constructor(settings) {\n\t    if (settings && ___default.isString(settings)) {\n\t      this.apiUrl = settings;\n\t    } else {\n\t      //Set api url if within settings\n\t      config.applySettings(settings);\n\t    }\n\t  }\n\t  /** Login as a user\n\t   * @param {Object} loginData - Object containing data to signup with\n\t   * @param {String} loginData.email - Email of new user\n\t   * @param {String} loginData.password - Password of new user\n\t   * @return {Promise}\n\t   */\n\t  login(loginData) {\n\t    return request.post(`${config.urls.js}/login`, loginData).then((res) => {\n\t      _logger.log({description: 'successful login', res: res});\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res;\n\t    }, (error) => {\n\t      _logger.error({description: 'Error logging in.', error: error});\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Logout a user\n\t   * @param {Object} token - Object containing data to signup with\n\t   * @return {Promise}\n\t   */\n\t  logout(token) {\n\t    console.log('config:', config.urls.js);\n\t    return request.post(`${config.urls.js}/logout`, {token: token}).then((res) => {\n\t      _logger.log({description: 'successful logout', res: res});\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res;\n\t    }, (err) => {\n\t      _logger.error({description: 'Error logging out.', error: err});\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\t  /** Signup a new user\n\t   * @param {Object} signupData - Object containing data to signup with\n\t   * @param {String} signupData.email - Email of new user\n\t   * @param {String} signupData.password - Password of new user\n\t   * @param {String} signupData.confirm - Object containing data to signup with\n\t   * @return {Promise}\n\t   */\n\t  signup(signupData) {\n\t    return request.post(`${config.urls.js}/signup`, signupData).then((res) => {\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      _logger.log({description: 'Successful signup', res: res, func: 'signup', obj: 'AuthRocket'});\n\t      return res;\n\t    }, (err) => {\n\t      _logger.error({description: 'Error signing up.', error: err, func: 'signup', obj: 'AuthRocket'});\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\t  /** Verify an existing token is valid\n\t   * @param {String} token - JSON Web Token to verify\n\t   * @return {Promise}\n\t   */\n\t  verify(token) {\n\t    return request.post(`${config.urls.js}/sessions/${token}`).then((res) => {\n\t      _logger.log({description: 'token is valid', res: res, func: 'verify', obj: 'AuthRocket'});\n\t      if (___default.has(res, 'error')) {\n\t        _logger.error({description: 'Error signing up.', error: res.error, res: res, func: 'signup', obj: 'AuthRocket'});\n\t        return Promise.reject(res.error);\n\t      }\n\t      return res;\n\t    }, (err) => {\n\t      _logger.error({description: 'Token is invalid.', error: err, func: 'verify', obj: 'AuthRocket'});\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\n\t /** Users action namespace\n\t  * @example\n\t  * //Get users list\n\t  * authrocket.Users.get().then(function(loadedUser){\n\t  *  console.log('User found:', loadedUser);\n\t  * });\n\t  */\n\t  get Users() {\n\t    return new UsersAction();\n\t  }\n\t  /** User action namespace\n\t   * @param {Object|String} userData - Object or string data used to identify user. Can be username or email as a string or within the object as parameters.\n\t   * @example\n\t   * //Get user by email\n\t   * authrocket.User('test@test.com').get().then(function(loadedUser){\n\t   *  console.log('User found:', loadedUser);\n\t   * });\n\t   * //Equivalent get request using object instead of string\n\t   * authrocket.User({email: 'test@test.com'}).get().then(function(loadedUser){\n\t   *  console.log('User found:', loadedUser);\n\t   * });\n\t   */\n\t  User(userData) {\n\t    return new UserAction(userData);\n\t  }\n\t}\n\n\treturn AuthRocket;\n\n}));"],"sourceRoot":"/source/"}