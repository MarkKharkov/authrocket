{"version":3,"sources":["authrocket.min.js","/source/authrocket.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","require","define","amd","AuthRocket","_","this","___default","defaultConfig","envName","accountId","process","env","AUTHROCKET_ACCOUNT_ID","apiKey","AUTHROCKET_API_KEY","realmId","AUTHROCKET_REALM_ID","jwtSecret","AUTHROCKET_JWT_SECRET","urls","api","AUTHROCKET_API_URL","login","AUTHROCKET_LOGIN_URL","signup","AUTHROCKET_SIGNUP_URL","jslib","AUTHROCKET_JSLIB_URL","Config","merge","config","settings","isString","apiUrl","has","jsApiUrl","signupUrl","value","loginData","requestWithHeaders","then","res","console","log","error","Promise","reject","token","signupData","err","url","data"],"mappings":"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","file":"authrocket.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash'], factory) :\n\tglobal.AuthRocket = factory(global._);\n}(this, function (_) { 'use strict';\n\n\tvar ___default = 'default' in _ ? _['default'] : _;\n\n\tlet defaultConfig = {\n\t\tenvName: 'local',\n\t\taccountId: process.env.AUTHROCKET_ACCOUNT_ID,\n\t\tapiKey: process.env.AUTHROCKET_API_KEY,\n\t\trealmId: process.env.AUTHROCKET_REALM_ID,\n\t\tjwtSecret: process.env.AUTHROCKET_JWT_SECRET,\n\t\turls: {\n\t\t\tapi: process.env.AUTHROCKET_API_URL  || 'https://api-e1.authrocket.com/v1/',\n\t\t\tlogin: process.env.AUTHROCKET_LOGIN_URL,\n\t\t\tsignup: process.env.AUTHROCKET_SIGNUP_URL,\n\t\t\tjslib: process.env.AUTHROCKET_JSLIB_URL\n\t\t}\n\t};\n\tlet instance = null;\n\tclass Config {\n\t\tconstructor() {\n\t\t\tif (!instance) {\n\t      instance = this;\n\t    }\n\t\t\t// console.log({description: 'Config object created.', config: merge(this, defaultConfig), func: 'constructor', obj: 'Config'});\n\t\t\treturn _.merge(instance, defaultConfig);\n\t\t}\n\t\t// get logLevel() {\n\t\t// \treturn defaultConfig.envs[envName].logLevel;\n\t\t// }\n\t\t// set envName(newEnv) {\n\t\t// \tenvName = newEnv;\n\t\t// \t// this.envName = newEnv;\n\t\t// \t// console.log('Environment name set:', envName);\n\t\t// }\n\t\t// get env() {\n\t\t// \treturn defaultConfig.envs[envName];\n\t\t// }\n\t}\n\tlet config = new Config();\n\n\tclass AuthRocket {\n\t  constructor(settings) {\n\t    if (settings && ___default.isString(settings)) {\n\t      this.apiUrl = settings;\n\t    } else {\n\t      //Set api url if within settings\n\t      this.apiUrl = ___default.has(settings, 'apiUrl') ? settings.apiUrl : config.urls.api;\n\t      this.apiKey = ___default.has(settings, 'apiKey') ? settings.apiKey : config.apiKey;\n\t      this.accountId = ___default.has(settings, 'accountId') ? settings.accountId : config.accountId;\n\t      this.realmId = ___default.has(settings, 'realmId') ? settings.realmId : config.realmId;\n\t      this.jsApiUrl = ___default.has(settings, 'jsApiUrl') ? settings.urls.jslib : config.urls.jslib;\n\t      this.signupUrl = ___default.has(settings, 'signupUrl') ? settings.urls.signup : config.urls.signup || config.urls.api;\n\t    }\n\t  }\n\t  /** Login as a user\n\t   * @param {Object} loginData - Object containing data to signup with\n\t   * @param {String} loginData.email - Email of new user\n\t   * @param {String} loginData.password - Password of new user\n\t   * @return {Promise}\n\t   */\n\t  login(loginData) {\n\t    return this.requestWithHeaders('login', loginData).then((res) => {\n\t      console.log('successful login', res);\n\t      //TODO: Handle error response\n\t      return res;\n\t    }, (error) => {\n\t      console.error('Error logging in.', error);\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Logout a user\n\t   * @param {Object} token - Object containing data to signup with\n\t   * @return {Promise}\n\t   */\n\t  logout(token) {\n\t    return this.requestWithHeaders('logout', {token: token}).then((res) => {\n\t      console.log('successful logout', res);\n\t      //TODO: Handle error response\n\t      return res;\n\t    }, (error) => {\n\t      console.error('Error logging out.', error);\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Signup a new user\n\t   * @param {Object} signupData - Object containing data to signup with\n\t   * @param {String} signupData.email - Email of new user\n\t   * @param {String} signupData.password - Password of new user\n\t   * @param {String} signupData.confirm - Object containing data to signup with\n\t   * @return {Promise}\n\t   */\n\t  signup(signupData) {\n\t    return this.requestWithHeaders(`${this.jsApiUrl}signup`, signupData).then((res) => {\n\t      console.log('successful signup', res);\n\t      //TODO: Handle error response\n\t      return res;\n\t    }, (error) => {\n\t      console.error('Error signing up.', error);\n\t      return Promise.reject(error);\n\t    });\n\t  }\n\t  /** Verify an existing token is valid\n\t   * @param {String} token - JSON Web Token to verify\n\t   * @return {Promise}\n\t   */\n\t  verify(token) {\n\t    return this.requestWithHeaders(`sessions/${token}`).then((res) => {\n\t      console.log('token is valid', res);\n\t      return res;\n\t    }, (err) => {\n\t      console.error('Token is invalid.', err);\n\t      return Promise.reject(err);\n\t    });\n\t  }\n\t  /** Attach AuthRocket request headers and make a request\n\t   * @param {String} endpoint - Endpoint to send request to\n\t   * @param {Object|String} data - Request data\n\t   * @return {Promise}\n\t   */\n\t   requestWithHeaders(url, data) {\n\n\t   }\n\n\t  // requestWithHeaders(url, data) {\n\t  //   // if (!_.has(this, ['accountId', 'apiKey', 'realmId'])) {\n\t  //   //   console.error('Account, apiKey, and realm are required to make a request with headers.', JSON.stringify(this));\n\t  //   //   return Promise.reject({message: 'Account, apiKey, and realm are required to make a request with headers.'});\n\t  //   // }\n\t  //   let options = {\n\t  //     method: 'post', //TODO: Handle other request methods\n\t  //     headers: {\n\t  //     //   'X-Authrocket-Account': this.accountId,\n\t  //     //   'X-Authrocket-Api-Key': this.apiKey,\n\t  //     //   'X-Authrocket-Realm': this.realmId,\n\t  //       'Accept': 'application/json',\n\t  //       'Content-Type': 'application/json',\n\t  //     //   'User-agent': 'https://github.com/prescottprue/authrocket'\n\t  //     }\n\t  //   };\n\t  //   //Add data to request if it exists\n\t  //   if (data) {\n\t  //     options.body = data;\n\t  //   }\n\t  //   console.log('requesting with options:',url, options);\n\t  //   return fetch(url, options).then((res) => {\n\t  //     if (res.status >= 200 && res.status < 300) {\n\t  //       if (res.error) {\n\t  //         return Promise.reject(res.error);\n\t  //       }\n\t  //       console.log('response with text:', res.json());\n\t  //       return res.json();\n\t  //     } else {\n\t  //       console.log('error response:', res);\n\t  //       var error = new Error(res.statusText);\n\t  //       error.response = res;\n\t  //       return Promise.reject(res.statusText);\n\t  //     }\n\t  //   }).then((text) => {\n\t  //     console.log('Text response:', text);\n\t  //     return text;\n\t  //   });\n\t  // }\n\t}\n\n\treturn AuthRocket;\n\n}));"],"sourceRoot":"/source/"}