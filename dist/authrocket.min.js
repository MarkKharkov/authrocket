function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function r(r,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e}}();!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash"),require("superagent")):"function"==typeof define&&define.amd?define(["lodash","superagent"],e):r.AuthRocket=e(r._,r.superagent)}(this,function(r,e){"use strict";function n(e){return r.isString(e)?e.replace(/\/$/,""):(logger.error({description:"Slash can only be removed from strings.",func:"removeTrailingSlash",file:"config"}),e)}function o(r,e){return r&&console[r]?console[r].apply(console,e):console.log.apply(console,e)}function t(r){var e="",n={};s.isObject(r)?("debug"==f&&s.has(r,"func")&&(e+=s.has(r,"obj")?"["+r.obj+"."+r.func+"()]\n ":s.has(r,"file")?"["+r.file+" > "+r.func+"()]\n ":"["+r.func+"()]\n "),s.each(s.omit(s.keys(r)),function(o,t,i){"func"!=o&&"obj"!=o&&("description"==o||"message"==o?e+=r[o]:s.isString(r[o])?n[o]=r[o]:n[o]=r[o])}),e+="\n"):s.isString(r)&&(e=r);var o=[e,n];return o}function i(r){return new Promise(function(e,n){r.end(function(r,o){return r?(401==r.status&&p.warn({description:"Unauthorized. You must be signed into make this request.",func:"handleResponse"}),r&&r.response?n(r.response.text):(p.warn({description:"Error response.",error:r,func:"handleResponse"}),n(r))):e(o.body)})})}var s="default"in r?r["default"]:r;e="default"in e?e["default"]:e;var u={accountId:process.env.AUTHROCKET_ACCOUNT_ID,apiKey:process.env.AUTHROCKET_API_KEY,realmId:process.env.AUTHROCKET_REALM_ID,jwtSecret:process.env.AUTHROCKET_JWT_SECRET,apiUrl:process.env.AUTHROCKET_API_URL||"https://api-e1.authrocket.com/v1/",jsUrl:process.env.AUTHROCKET_JS_URL},c=null,a=function(){function e(){return _classCallCheck(this,e),c||(c=this),r.merge(c,u)}return _createClass(e,[{key:"applySettings",value:function(e){var n=this;r.each(r.keys(e),function(r){n[r]=e[r]})}},{key:"urls",get:function(){var r=this.jsUrl,e=this.apiUrl;return Object.defineProperties({},{api:{get:function(){return e?n(e):null},configurable:!0,enumerable:!0},js:{get:function(){return r?n(r):null},configurable:!0,enumerable:!0}})}}]),e}(),l=new a,f="debug";l.logLevel&&(f=l.logLevel);var p={log:function(r){var e=t(r);"production"==l.envName?o("log",e):o("log",e)},info:function(r){var e=t(r);"production"==l.envName?o("info",e):o("info",e)},warn:function(r){var e=t(r);"production"==l.envName?o("warn",e):o("warn",e)},debug:function(r){var e=t(r);"production"==l.envName||o("debug",e)},error:function(r){var e=t(r);"production"==l.envName?o("error",e):o("error",e)}},g={get:function(r,n){var o=e.get(r);return n&&o.query(n),i(o)},post:function(r,n){var o=e.post(r).send(n);return i(o)},put:function(r,n){var o=e.put(r,n);return i(o)},del:function(r,n){var o=e.put(r,n);return i(o)},postWithHeaders:function(r,e){}},d=function(){function e(r){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){return g.get(l.urls.api+"/users/"+e.username,loginData).then(function(e){return p.log({description:"successful login",res:e}),r.has(e,"error")?(p.error({description:"Error signing up.",error:e.error,res:e,func:"signup",obj:"AuthRocket"}),Promise.reject(e.error)):e},function(r){return p.error({description:"Error logging in.",error:r}),Promise.reject(r)})}},{key:"remove",value:function(e){return g.del(l.urls.api+"/users/"+e.username,e).then(function(e){return r.has(e,"error")?(p.error({description:"Error removing user.",error:e.error,res:e,func:"signup",obj:"AuthRocket"}),Promise.reject(e.error)):(p.log({description:"User removed successfully.",res:e,func:"signup",obj:"AuthRocket"}),e)},function(r){return p.error({description:"Error removing user.",error:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r)})}}]),e}(),h=function(){function r(e){_classCallCheck(this,r)}return _createClass(r,[{key:"get",value:function(){return g.get(l.urls.api+"/users").then(function(r){return p.log({description:"successful login",res:r}),s.has(r,"error")?(p.error({description:"Error signing up.",error:r.error,res:r,func:"signup",obj:"Users"}),Promise.reject(r.error)):r},function(r){return p.error({description:"Error logging in.",error:r}),Promise.reject(r)})}},{key:"add",value:function(r){return g.post(l.urls.api+"/users",r).then(function(r){return p.log({description:"Successful created new user",res:r}),s.has(r,"error")?(p.error({description:"Error creating new user.",error:r.error,res:r,func:"signup",obj:"Users"}),Promise.reject(r.error)):r},function(r){return p.error({description:"Error creating new user.",error:r}),Promise.reject(r)})}}]),r}(),v=function(){function r(e){_classCallCheck(this,r),e&&s.isString(e)?this.apiUrl=e:l.applySettings(e)}return _createClass(r,[{key:"login",value:function(r){return g.post(l.urls.js+"/login",r).then(function(r){return p.log({description:"successful login",res:r}),s.has(r,"error")?(p.error({description:"Error signing up.",error:r.error,res:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r.error)):r},function(r){return p.error({description:"Error logging in.",error:r}),Promise.reject(r)})}},{key:"logout",value:function(r){return console.log("config:",l.urls.js),g.post(l.urls.js+"/logout",{token:r}).then(function(r){return p.log({description:"successful logout",res:r}),s.has(r,"error")?(p.error({description:"Error signing up.",error:r.error,res:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r.error)):r},function(r){return p.error({description:"Error logging out.",error:r}),Promise.reject(r)})}},{key:"signup",value:function(r){return g.post(l.urls.js+"/signup",r).then(function(r){return s.has(r,"error")?(p.error({description:"Error signing up.",error:r.error,res:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r.error)):(p.log({description:"Successful signup",res:r,func:"signup",obj:"AuthRocket"}),r)},function(r){return p.error({description:"Error signing up.",error:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r)})}},{key:"verify",value:function(r){return g.post(l.urls.js+"/sessions/"+r).then(function(r){return p.log({description:"token is valid",res:r,func:"verify",obj:"AuthRocket"}),s.has(r,"error")?(p.error({description:"Error signing up.",error:r.error,res:r,func:"signup",obj:"AuthRocket"}),Promise.reject(r.error)):r},function(r){return p.error({description:"Token is invalid.",error:r,func:"verify",obj:"AuthRocket"}),Promise.reject(r)})}},{key:"User",value:function(r){return new d(r)}},{key:"Users",get:function(){return new h}}]),r}();return v});
//# sourceMappingURL=authrocket.min.js.map
