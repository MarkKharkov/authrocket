function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,r,o){return r&&e(n.prototype,r),o&&e(n,o),n}}();!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("lodash"),require("superagent")):"function"==typeof define&&define.amd?define(["lodash","superagent"],n):e.AuthRocket=n(e._,e.superagent)}(this,function(e,n){"use strict";function r(n){return e.isString(n)?n.replace(/\/$/,""):(logger.error({description:"Slash can only be removed from strings.",func:"removeTrailingSlash",file:"config"}),n)}function o(e,n){return e&&console[e]?console[e].apply(console,n):console.log.apply(console,n)}function t(e){var n="",r={};u.isObject(e)?("debug"==f&&u.has(e,"func")&&(n+=u.has(e,"obj")?"["+e.obj+"."+e.func+"()]\n ":u.has(e,"file")?"["+e.file+" > "+e.func+"()]\n ":"["+e.func+"()]\n "),u.each(u.omit(u.keys(e)),function(o,t,i){"func"!=o&&"obj"!=o&&("description"==o||"message"==o?n+=e[o]:u.isString(e[o])?r[o]=e[o]:r[o]=e[o])}),n+="\n"):u.isString(e)&&(n=e);var o=[n,r];return o}function i(e){return new Promise(function(n,r){e.end(function(e,o){return e?(401==e.status&&p.warn({description:"Unauthorized. You must be signed into make this request.",func:"handleResponse"}),e&&e.response?r(e.response.text):(p.warn({description:"Error response.",error:e,func:"handleResponse"}),r(e))):n(o.body)})})}var u="default"in e?e["default"]:e;n="default"in n?n["default"]:n;var s={accountId:process.env.AUTHROCKET_ACCOUNT_ID,apiKey:process.env.AUTHROCKET_API_KEY,realmId:process.env.AUTHROCKET_REALM_ID,jwtSecret:process.env.AUTHROCKET_JWT_SECRET,apiUrl:process.env.AUTHROCKET_API_URL||"https://api-e1.authrocket.com/v1/",jsLibUrl:process.env.AUTHROCKET_JSLIB_URL},c=null,a=function(){function n(){return _classCallCheck(this,n),c||(c=this),e.merge(c,s)}return _createClass(n,[{key:"applySettings",value:function(n){var r=this;e.each(e.keys(n),function(e){r[e]=n[e]})}},{key:"urls",get:function(){var e=this.jsLibUrl;return Object.defineProperties({},{api:{get:function(){return this.apiUrl?r(this.apiUrl):null},configurable:!0,enumerable:!0},js:{get:function(){return e?r(e):null},configurable:!0,enumerable:!0}})}}]),n}(),l=new a,f="debug";l.logLevel&&(f=l.logLevel);var p={log:function(e){var n=t(e);"production"==l.envName?o("log",n):o("log",n)},info:function(e){var n=t(e);"production"==l.envName?o("info",n):o("info",n)},warn:function(e){var n=t(e);"production"==l.envName?o("warn",n):o("warn",n)},debug:function(e){var n=t(e);"production"==l.envName||o("debug",n)},error:function(e){var n=t(e);"production"==l.envName?o("error",n):o("error",n)}},g={get:function(e,r){var o=n.get(e);return r&&o.query(r),i(o)},post:function(e,r){var o=n.post(e).send(r);return i(o)},put:function(e,r){var o=n.put(e,r);return i(o)},del:function(e,r){var o=n.put(e,r);return i(o)}},d=function(){function e(n){_classCallCheck(this,e),n&&u.isString(n)?this.apiUrl=n:l.applySettings(n)}return _createClass(e,[{key:"login",value:function(e){return g.post(l.urls.js+"/login",e).then(function(e){return p.log({description:"successful login",res:e}),e},function(e){return p.error({description:"Error logging in.",error:e}),Promise.reject(e)})}},{key:"logout",value:function(e){return console.log("config:",l.urls.js),g.post(l.urls.js+"/logout",{token:e}).then(function(e){return p.log({description:"successful logout",res:e}),e},function(e){return p.error({description:"Error logging out.",error:e}),Promise.reject(e)})}},{key:"signup",value:function(e){return g.post(l.urls.js+"/signup",e).then(function(e){return p.log({description:"Successful signup",res:e,func:"signup",obj:"AuthRocket"}),e},function(e){return p.error({description:"Error signing up.",error:e,func:"signup",obj:"AuthRocket"}),Promise.reject(error)})}},{key:"verify",value:function(e){return g.post(l.urls.js+"/sessions/"+e).then(function(e){return p.log({description:"token is valid",res:e,func:"verify",obj:"AuthRocket"}),e},function(e){return p.error({description:"Token is invalid.",error:e,func:"verify",obj:"AuthRocket"}),Promise.reject(e)})}},{key:"requestWithHeaders",value:function(e,n){}}]),e}();return d});
//# sourceMappingURL=authrocket.min.js.map
